function cov_2ileepi5ri(){var path="D:\\Capgemini Training\\FLight_Booking_System\\back-End\\Booking\\booking.js";var hash="2e9e32ed262289a43c0a15d8999d4e8a03f14c33";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"D:\\Capgemini Training\\FLight_Booking_System\\back-End\\Booking\\booking.js",statementMap:{"0":{start:{line:1,column:16},end:{line:1,column:34}},"1":{start:{line:2,column:12},end:{line:2,column:21}},"2":{start:{line:3,column:19},end:{line:3,column:41}},"3":{start:{line:4,column:13},end:{line:4,column:28}},"4":{start:{line:6,column:18},end:{line:6,column:40}},"5":{start:{line:9,column:21},end:{line:9,column:45}},"6":{start:{line:10,column:18},end:{line:10,column:47}},"7":{start:{line:13,column:0},end:{line:13,column:27}},"8":{start:{line:14,column:0},end:{line:14,column:49}},"9":{start:{line:17,column:17},end:{line:17,column:36}},"10":{start:{line:19,column:0},end:{line:19,column:30}},"11":{start:{line:20,column:16},end:{line:20,column:41}},"12":{start:{line:23,column:0},end:{line:25,column:3}},"13":{start:{line:24,column:2},end:{line:24,column:36}},"14":{start:{line:28,column:23},end:{line:42,column:1}},"15":{start:{line:45,column:20},end:{line:45,column:48}},"16":{start:{line:46,column:0},end:{line:46,column:76}},"17":{start:{line:62,column:0},end:{line:71,column:2}},"18":{start:{line:63,column:2},end:{line:70,column:4}},"19":{start:{line:65,column:4},end:{line:65,column:31}},"20":{start:{line:67,column:4},end:{line:69,column:5}},"21":{start:{line:68,column:6},end:{line:68,column:44}},"22":{start:{line:92,column:0},end:{line:113,column:3}},"23":{start:{line:94,column:17},end:{line:94,column:59}},"24":{start:{line:95,column:14},end:{line:95,column:16}},"25":{start:{line:96,column:2},end:{line:112,column:5}},"26":{start:{line:98,column:4},end:{line:105,column:5}},"27":{start:{line:99,column:23},end:{line:103,column:7}},"28":{start:{line:104,column:6},end:{line:104,column:29}},"29":{start:{line:107,column:4},end:{line:107,column:32}},"30":{start:{line:109,column:4},end:{line:111,column:5}},"31":{start:{line:110,column:6},end:{line:110,column:16}},"32":{start:{line:117,column:16},end:{line:117,column:19}},"33":{start:{line:118,column:16},end:{line:118,column:18}},"34":{start:{line:119,column:0},end:{line:146,column:3}},"35":{start:{line:120,column:19},end:{line:120,column:40}},"36":{start:{line:121,column:2},end:{line:121,column:34}},"37":{start:{line:123,column:19},end:{line:138,column:3}},"38":{start:{line:139,column:19},end:{line:139,column:42}},"39":{start:{line:140,column:4},end:{line:145,column:7}},"40":{start:{line:141,column:4},end:{line:141,column:34}},"41":{start:{line:142,column:4},end:{line:142,column:49}},"42":{start:{line:143,column:4},end:{line:143,column:16}},"43":{start:{line:144,column:4},end:{line:144,column:35}},"44":{start:{line:169,column:0},end:{line:174,column:3}},"45":{start:{line:170,column:2},end:{line:173,column:4}},"46":{start:{line:171,column:4},end:{line:171,column:35}},"47":{start:{line:172,column:4},end:{line:172,column:37}},"48":{start:{line:179,column:0},end:{line:184,column:3}},"49":{start:{line:180,column:2},end:{line:182,column:3}},"50":{start:{line:181,column:4},end:{line:181,column:21}},"51":{start:{line:183,column:2},end:{line:183,column:40}},"52":{start:{line:186,column:0},end:{line:186,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:23,column:117},end:{line:23,column:118}},loc:{start:{line:23,column:121},end:{line:25,column:1}},line:23},"1":{name:"(anonymous_1)",decl:{start:{line:62,column:24},end:{line:62,column:25}},loc:{start:{line:62,column:38},end:{line:71,column:1}},line:62},"2":{name:"(anonymous_2)",decl:{start:{line:63,column:22},end:{line:63,column:23}},loc:{start:{line:63,column:32},end:{line:66,column:3}},line:63},"3":{name:"(anonymous_3)",decl:{start:{line:66,column:11},end:{line:66,column:12}},loc:{start:{line:66,column:18},end:{line:70,column:3}},line:66},"4":{name:"(anonymous_4)",decl:{start:{line:92,column:40},end:{line:92,column:41}},loc:{start:{line:92,column:54},end:{line:113,column:1}},line:92},"5":{name:"(anonymous_5)",decl:{start:{line:96,column:39},end:{line:96,column:40}},loc:{start:{line:96,column:51},end:{line:108,column:3}},line:96},"6":{name:"(anonymous_6)",decl:{start:{line:108,column:11},end:{line:108,column:12}},loc:{start:{line:108,column:20},end:{line:112,column:3}},line:108},"7":{name:"(anonymous_7)",decl:{start:{line:119,column:45},end:{line:119,column:46}},loc:{start:{line:119,column:57},end:{line:146,column:1}},line:119},"8":{name:"(anonymous_8)",decl:{start:{line:140,column:25},end:{line:140,column:26}},loc:{start:{line:140,column:30},end:{line:145,column:5}},line:140},"9":{name:"(anonymous_9)",decl:{start:{line:169,column:41},end:{line:169,column:42}},loc:{start:{line:169,column:53},end:{line:174,column:1}},line:169},"10":{name:"(anonymous_10)",decl:{start:{line:170,column:60},end:{line:170,column:61}},loc:{start:{line:170,column:72},end:{line:173,column:3}},line:170},"11":{name:"(anonymous_11)",decl:{start:{line:179,column:17},end:{line:179,column:18}},loc:{start:{line:179,column:26},end:{line:184,column:1}},line:179}},branchMap:{"0":{loc:{start:{line:67,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:67,column:4},end:{line:69,column:5}},{start:{line:67,column:4},end:{line:69,column:5}}],line:67},"1":{loc:{start:{line:109,column:4},end:{line:111,column:5}},type:"if",locations:[{start:{line:109,column:4},end:{line:111,column:5}},{start:{line:109,column:4},end:{line:111,column:5}}],line:109},"2":{loc:{start:{line:180,column:2},end:{line:182,column:3}},type:"if",locations:[{start:{line:180,column:2},end:{line:182,column:3}},{start:{line:180,column:2},end:{line:182,column:3}}],line:180}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"2e9e32ed262289a43c0a15d8999d4e8a03f14c33"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2ileepi5ri=function(){return actualCoverage;};}return actualCoverage;}cov_2ileepi5ri();const express=(cov_2ileepi5ri().s[0]++,require('express'));const app=(cov_2ileepi5ri().s[1]++,express());const bodyParser=(cov_2ileepi5ri().s[2]++,require('body-parser'));const cors=(cov_2ileepi5ri().s[3]++,require('cors'));const sendEmail=(cov_2ileepi5ri().s[4]++,require('./sendEmail'));//swagger libraries
const swaggerJsDoc=(cov_2ileepi5ri().s[5]++,require("swagger-jsdoc"));const swaggerUi=(cov_2ileepi5ri().s[6]++,require("swagger-ui-express"));//middleware
cov_2ileepi5ri().s[7]++;app.use(bodyParser.json());cov_2ileepi5ri().s[8]++;app.use(cors({origin:'http://localhost:4200'}));//mongoose
const mongoose=(cov_2ileepi5ri().s[9]++,require('mongoose'));cov_2ileepi5ri().s[10]++;require('./bookingDataModel');const booking=(cov_2ileepi5ri().s[11]++,mongoose.model("booking"));cov_2ileepi5ri().s[12]++;mongoose.connect('mongodb+srv://Kartik:1234@cluster0.nvlfp.mongodb.net/booking_project?retryWrites=true&w=majority',()=>{cov_2ileepi5ri().f[0]++;cov_2ileepi5ri().s[13]++;console.log('Database connected');});//swagger
const swaggerOptions=(cov_2ileepi5ri().s[14]++,{swaggerDefinition:{info:{version:"1.0.0",title:"Booking Microservice",description:"Booking microservice constains http methods",contact:{name:"BookMyFlight"},servers:["http://localhost:3300"]}},apis:["booking.js"]});//swagger middleware
const swaggerDocs=(cov_2ileepi5ri().s[15]++,swaggerJsDoc(swaggerOptions));cov_2ileepi5ri().s[16]++;app.use("/booking/api-docs",swaggerUi.serve,swaggerUi.setup(swaggerDocs));//GET METHOD
/**
 * @swagger
 * /booking/all:
 *  get:
 *    description: Use to get all bookings
 *    responses:
 *      '200':
 *        description: A successful response
 *      '400':
 *        description: Server error.
 */cov_2ileepi5ri().s[17]++;app.get("/booking/all",(req,res)=>{cov_2ileepi5ri().f[1]++;cov_2ileepi5ri().s[18]++;booking.find().then(data=>{cov_2ileepi5ri().f[2]++;cov_2ileepi5ri().s[19]++;//console.log(data);
res.status(200).send(data);}).catch(err=>{cov_2ileepi5ri().f[3]++;cov_2ileepi5ri().s[20]++;if(err){cov_2ileepi5ri().b[0][0]++;cov_2ileepi5ri().s[21]++;res.status(400).json(`Error: ${err}`);}else{cov_2ileepi5ri().b[0][1]++;}});});/**
 * @swagger
 * /booking/allbookings/{userId}:
 *  get:
 *    description: Use to get all bookings of that user
 *    responses:
 *      '200':
 *        description: A successful response
 *      '400':
 *        description: Server error.
 *  parameters:
 *        - in: path
 *          name: userId
 *          required: true
 *          schema:
 *            type: String
 *          description: User Object Id
 */cov_2ileepi5ri().s[22]++;app.get('/booking/allbookings/:userId',(req,res)=>{cov_2ileepi5ri().f[4]++;//console.log('inside get'+req.params.userId);
var objectId=(cov_2ileepi5ri().s[23]++,mongoose.Types.ObjectId(req.params.userId));var myArr=(cov_2ileepi5ri().s[24]++,[]);cov_2ileepi5ri().s[25]++;booking.find({userId:objectId}).then(response=>{cov_2ileepi5ri().f[5]++;cov_2ileepi5ri().s[26]++;for(let i of response){let bookingObj=(cov_2ileepi5ri().s[27]++,{flight:i.flight,bookingId:i.bookingId,userDetails:i.userDetails});cov_2ileepi5ri().s[28]++;myArr.push(bookingObj);}//console.log(myArr);
cov_2ileepi5ri().s[29]++;res.status(200).send(myArr);}).catch(err=>{cov_2ileepi5ri().f[6]++;cov_2ileepi5ri().s[30]++;if(err){cov_2ileepi5ri().b[1][0]++;cov_2ileepi5ri().s[31]++;throw err;}else{cov_2ileepi5ri().b[1][1]++;}});});//POST METHOD
var bookingId=(cov_2ileepi5ri().s[32]++,200);var userEmail=(cov_2ileepi5ri().s[33]++,'');cov_2ileepi5ri().s[34]++;app.post("/booking/add/:flightName/:userId",(req,res)=>{cov_2ileepi5ri().f[7]++;let flightName=(cov_2ileepi5ri().s[35]++,req.params.flightName);cov_2ileepi5ri().s[36]++;userEmail=req.body.user.email;//console.log(userEmail);
var newBooking=(cov_2ileepi5ri().s[37]++,{userId:mongoose.Types.ObjectId(req.params.userId),flight:{flightName:flightName,airLine:req.body.flight.airLine,source:req.body.flight.source,destination:req.body.flight.destination,fare:req.body.flight.fare},userDetails:{firstName:req.body.user.firstName,lastName:req.body.user.lastName,email:req.body.user.email},bookingId:bookingId});var booking1=(cov_2ileepi5ri().s[38]++,new booking(newBooking));cov_2ileepi5ri().s[39]++;booking1.save().then(()=>{cov_2ileepi5ri().f[8]++;cov_2ileepi5ri().s[40]++;sendEmail.mailSend(userEmail);cov_2ileepi5ri().s[41]++;res.status(200).json({bookingId:bookingId});cov_2ileepi5ri().s[42]++;bookingId++;cov_2ileepi5ri().s[43]++;console.log('booking success');});});//DELETE BOOKING
/**
 * @swagger
 * /booking/cancel/{bookingId}:
 *  delete:
 *    description: Use to cancel
 *    responses:
 *      '200':
 *        description: Booking successfully cancelled
 *      '400':
 *        description: Server error.
 *  parameters:
 *        - in: path
 *          name: bookingId
 *          required: true
 *          schema:
 *            type: number
 *          description: bookingId
 */cov_2ileepi5ri().s[44]++;app.delete("/booking/cancel/:bookingId",(req,res)=>{cov_2ileepi5ri().f[9]++;cov_2ileepi5ri().s[45]++;booking.deleteOne({bookingId:req.params.bookingId}).then(response=>{cov_2ileepi5ri().f[10]++;cov_2ileepi5ri().s[46]++;res.status(200).send(response);cov_2ileepi5ri().s[47]++;console.log("booking cancelled");});});cov_2ileepi5ri().s[48]++;app.listen(3300,err=>{cov_2ileepi5ri().f[11]++;cov_2ileepi5ri().s[49]++;if(err){cov_2ileepi5ri().b[2][0]++;cov_2ileepi5ri().s[50]++;console.log(err);}else{cov_2ileepi5ri().b[2][1]++;}cov_2ileepi5ri().s[51]++;console.log("Listening to port 3300");});cov_2ileepi5ri().s[52]++;module.exports=app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tpbmcuanMiXSwibmFtZXMiOlsiZXhwcmVzcyIsInJlcXVpcmUiLCJhcHAiLCJib2R5UGFyc2VyIiwiY29ycyIsInNlbmRFbWFpbCIsInN3YWdnZXJKc0RvYyIsInN3YWdnZXJVaSIsInVzZSIsImpzb24iLCJvcmlnaW4iLCJtb25nb29zZSIsImJvb2tpbmciLCJtb2RlbCIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIiwic3dhZ2dlck9wdGlvbnMiLCJzd2FnZ2VyRGVmaW5pdGlvbiIsImluZm8iLCJ2ZXJzaW9uIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNvbnRhY3QiLCJuYW1lIiwic2VydmVycyIsImFwaXMiLCJzd2FnZ2VyRG9jcyIsInNlcnZlIiwic2V0dXAiLCJnZXQiLCJyZXEiLCJyZXMiLCJmaW5kIiwidGhlbiIsImRhdGEiLCJzdGF0dXMiLCJzZW5kIiwiY2F0Y2giLCJlcnIiLCJvYmplY3RJZCIsIlR5cGVzIiwiT2JqZWN0SWQiLCJwYXJhbXMiLCJ1c2VySWQiLCJteUFyciIsInJlc3BvbnNlIiwiaSIsImJvb2tpbmdPYmoiLCJmbGlnaHQiLCJib29raW5nSWQiLCJ1c2VyRGV0YWlscyIsInB1c2giLCJ1c2VyRW1haWwiLCJwb3N0IiwiZmxpZ2h0TmFtZSIsImJvZHkiLCJ1c2VyIiwiZW1haWwiLCJuZXdCb29raW5nIiwiYWlyTGluZSIsInNvdXJjZSIsImRlc3RpbmF0aW9uIiwiZmFyZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiYm9va2luZzEiLCJzYXZlIiwibWFpbFNlbmQiLCJkZWxldGUiLCJkZWxldGVPbmUiLCJsaXN0ZW4iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiZzJNQWVZOzJGQWZaLEtBQU1BLENBQUFBLE9BQU8sMEJBQUdDLE9BQU8sQ0FBQyxTQUFELENBQVYsQ0FBYixDQUNBLEtBQU1DLENBQUFBLEdBQUcsMEJBQUdGLE9BQU8sRUFBVixDQUFULENBQ0EsS0FBTUcsQ0FBQUEsVUFBVSwwQkFBR0Ys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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRyx5QkFFQWQsR0FBRyxDQUFDbUUsTUFBSixDQUFXLDRCQUFYLENBQXlDLENBQUN0QyxHQUFELENBQU1DLEdBQU4sR0FBWSxrREFDbkRwQixPQUFPLENBQUMwRCxTQUFSLENBQWtCLENBQUNwQixTQUFTLENBQUVuQixHQUFHLENBQUNZLE1BQUosQ0FBV08sU0FBdkIsQ0FBbEIsRUFBcURoQixJQUFyRCxDQUEyRFksUUFBRCxFQUFZLG1EQUNwRWQsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJTLFFBQXJCLEVBRG9FLHlCQUVwRS9CLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG1CQUFaLEVBQ0QsQ0FIRCxFQUlELENBTEQsRSx5QkFVQWQsR0FBRyxDQUFDcUUsTUFBSixDQUFXLElBQVgsQ0FBa0JoQyxHQUFELEVBQVMsbURBQ3hCLEdBQUdBLEdBQUgsQ0FBTyxxREFDTHhCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZdUIsR0FBWixFQUNELENBRkQsaUNBRHdCLHlCQUl4QnhCLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHdCQUFaLEVBQ0QsQ0FMRCxFLHlCQU9Bd0QsTUFBTSxDQUFDQyxPQUFQLENBQWtCdkUsR0FBbEIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xyXG5cclxuY29uc3Qgc2VuZEVtYWlsID0gcmVxdWlyZSgnLi9zZW5kRW1haWwnKTtcclxuXHJcbi8vc3dhZ2dlciBsaWJyYXJpZXNcclxuY29uc3Qgc3dhZ2dlckpzRG9jID0gcmVxdWlyZShcInN3YWdnZXItanNkb2NcIik7XHJcbmNvbnN0IHN3YWdnZXJVaSA9IHJlcXVpcmUoXCJzd2FnZ2VyLXVpLWV4cHJlc3NcIik7XHJcblxyXG4vL21pZGRsZXdhcmVcclxuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XHJcbmFwcC51c2UoY29ycyh7b3JpZ2luOiAnaHR0cDovL2xvY2FsaG9zdDo0MjAwJ30pKTtcclxuXHJcbi8vbW9uZ29vc2VcclxuY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xyXG5cclxucmVxdWlyZSgnLi9ib29raW5nRGF0YU1vZGVsJyk7XHJcbmNvbnN0IGJvb2tpbmcgPSBtb25nb29zZS5tb2RlbChcImJvb2tpbmdcIik7XHJcblxyXG5cclxubW9uZ29vc2UuY29ubmVjdCgnbW9uZ29kYitzcnY6Ly9LYXJ0aWs6MTIzNEBjbHVzdGVyMC5udmxmcC5tb25nb2RiLm5ldC9ib29raW5nX3Byb2plY3Q/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5JywgKCk9PntcclxuICBjb25zb2xlLmxvZygnRGF0YWJhc2UgY29ubmVjdGVkJyk7XHJcbn0pO1xyXG5cclxuLy9zd2FnZ2VyXHJcbmNvbnN0IHN3YWdnZXJPcHRpb25zID0ge1xyXG4gIHN3YWdnZXJEZWZpbml0aW9uOiB7XHJcbiAgICBpbmZvOiB7XHJcbiAgICAgIHZlcnNpb246IFwiMS4wLjBcIixcclxuICAgICAgdGl0bGU6IFwiQm9va2luZyBNaWNyb3NlcnZpY2VcIixcclxuICAgICAgZGVzY3JpcHRpb246IFwiQm9va2luZyBtaWNyb3NlcnZpY2UgY29uc3RhaW5zIGh0dHAgbWV0aG9kc1wiLFxyXG4gICAgICBjb250YWN0OiB7XHJcbiAgICAgICAgbmFtZTogXCJCb29rTXlGbGlnaHRcIlxyXG4gICAgICB9LFxyXG4gICAgICBzZXJ2ZXJzOiBbXCJodHRwOi8vbG9jYWxob3N0OjMzMDBcIl1cclxuICAgIH1cclxuICB9LFxyXG5cclxuICBhcGlzOiBbXCJib29raW5nLmpzXCJdXHJcbn07XHJcblxyXG4vL3N3YWdnZXIgbWlkZGxld2FyZVxyXG5jb25zdCBzd2FnZ2VyRG9jcyA9IHN3YWdnZXJKc0RvYyhzd2FnZ2VyT3B0aW9ucyk7XHJcbmFwcC51c2UoXCIvYm9va2luZy9hcGktZG9jc1wiLCBzd2FnZ2VyVWkuc2VydmUsIHN3YWdnZXJVaS5zZXR1cChzd2FnZ2VyRG9jcykpO1xyXG5cclxuXHJcbi8vR0VUIE1FVEhPRFxyXG5cclxuLyoqXHJcbiAqIEBzd2FnZ2VyXHJcbiAqIC9ib29raW5nL2FsbDpcclxuICogIGdldDpcclxuICogICAgZGVzY3JpcHRpb246IFVzZSB0byBnZXQgYWxsIGJvb2tpbmdzXHJcbiAqICAgIHJlc3BvbnNlczpcclxuICogICAgICAnMjAwJzpcclxuICogICAgICAgIGRlc2NyaXB0aW9uOiBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcclxuICogICAgICAnNDAwJzpcclxuICogICAgICAgIGRlc2NyaXB0aW9uOiBTZXJ2ZXIgZXJyb3IuXHJcbiAqL1xyXG5hcHAuZ2V0KFwiL2Jvb2tpbmcvYWxsXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGJvb2tpbmcuZmluZCgpLnRoZW4oKGRhdGEpID0+IHtcclxuICAgIC8vY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChkYXRhKTtcclxuICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgaWYoZXJyKXtcclxuICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oYEVycm9yOiAke2Vycn1gKTtcclxuICAgIH1cclxuICB9KVxyXG59KVxyXG5cclxuXHJcbi8qKlxyXG4gKiBAc3dhZ2dlclxyXG4gKiAvYm9va2luZy9hbGxib29raW5ncy97dXNlcklkfTpcclxuICogIGdldDpcclxuICogICAgZGVzY3JpcHRpb246IFVzZSB0byBnZXQgYWxsIGJvb2tpbmdzIG9mIHRoYXQgdXNlclxyXG4gKiAgICByZXNwb25zZXM6XHJcbiAqICAgICAgJzIwMCc6XHJcbiAqICAgICAgICBkZXNjcmlwdGlvbjogQSBzdWNjZXNzZnVsIHJlc3BvbnNlXHJcbiAqICAgICAgJzQwMCc6XHJcbiAqICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yLlxyXG4gKiAgcGFyYW1ldGVyczpcclxuICogICAgICAgIC0gaW46IHBhdGhcclxuICogICAgICAgICAgbmFtZTogdXNlcklkXHJcbiAqICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAqICAgICAgICAgIHNjaGVtYTpcclxuICogICAgICAgICAgICB0eXBlOiBTdHJpbmdcclxuICogICAgICAgICAgZGVzY3JpcHRpb246IFVzZXIgT2JqZWN0IElkXHJcbiAqL1xyXG5hcHAuZ2V0KCcvYm9va2luZy9hbGxib29raW5ncy86dXNlcklkJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgLy9jb25zb2xlLmxvZygnaW5zaWRlIGdldCcrcmVxLnBhcmFtcy51c2VySWQpO1xyXG4gIHZhciBvYmplY3RJZCA9IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkKHJlcS5wYXJhbXMudXNlcklkKTtcclxuICB2YXIgbXlBcnIgPSBbXTtcclxuICBib29raW5nLmZpbmQoe3VzZXJJZDpvYmplY3RJZH0pLnRoZW4oKHJlc3BvbnNlKT0+e1xyXG5cclxuICAgIGZvcihsZXQgaSBvZiByZXNwb25zZSl7XHJcbiAgICAgIGxldCBib29raW5nT2JqID0ge1xyXG4gICAgICAgIGZsaWdodDogaS5mbGlnaHQsXHJcbiAgICAgICAgYm9va2luZ0lkOiBpLmJvb2tpbmdJZCxcclxuICAgICAgICB1c2VyRGV0YWlsczogaS51c2VyRGV0YWlsc1xyXG4gICAgICB9XHJcbiAgICAgIG15QXJyLnB1c2goYm9va2luZ09iaik7XHJcbiAgICB9XHJcbiAgICAvL2NvbnNvbGUubG9nKG15QXJyKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKG15QXJyKTtcclxuICB9KS5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBpZihlcnIpe1xyXG4gICAgICB0aHJvdyBlcnI7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy9QT1NUIE1FVEhPRFxyXG5cclxudmFyIGJvb2tpbmdJZCA9IDIwMDtcclxudmFyIHVzZXJFbWFpbCA9ICcnO1xyXG5hcHAucG9zdChcIi9ib29raW5nL2FkZC86ZmxpZ2h0TmFtZS86dXNlcklkXCIsIChyZXEsIHJlcyk9PntcclxuICBsZXQgZmxpZ2h0TmFtZSA9IHJlcS5wYXJhbXMuZmxpZ2h0TmFtZTtcclxuICB1c2VyRW1haWwgPSByZXEuYm9keS51c2VyLmVtYWlsO1xyXG4gIC8vY29uc29sZS5sb2codXNlckVtYWlsKTtcclxuICB2YXIgbmV3Qm9va2luZyA9IHtcclxuICAgIHVzZXJJZDogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQocmVxLnBhcmFtcy51c2VySWQpLFxyXG4gICAgZmxpZ2h0OntcclxuICAgICAgZmxpZ2h0TmFtZTogZmxpZ2h0TmFtZSxcclxuICAgICAgYWlyTGluZTogcmVxLmJvZHkuZmxpZ2h0LmFpckxpbmUsXHJcbiAgICAgIHNvdXJjZTogcmVxLmJvZHkuZmxpZ2h0LnNvdXJjZSxcclxuICAgICAgZGVzdGluYXRpb246IHJlcS5ib2R5LmZsaWdodC5kZXN0aW5hdGlvbixcclxuICAgICAgZmFyZTogcmVxLmJvZHkuZmxpZ2h0LmZhcmUsXHJcbiAgICB9LFxyXG4gICAgdXNlckRldGFpbHM6e1xyXG4gICAgICBmaXJzdE5hbWU6IHJlcS5ib2R5LnVzZXIuZmlyc3ROYW1lLFxyXG4gICAgICBsYXN0TmFtZTogcmVxLmJvZHkudXNlci5sYXN0TmFtZSxcclxuICAgICAgZW1haWw6IHJlcS5ib2R5LnVzZXIuZW1haWxcclxuICAgIH0sXHJcbiAgICBib29raW5nSWQ6IGJvb2tpbmdJZFxyXG4gIH1cclxuICAgIHZhciBib29raW5nMSA9IG5ldyBib29raW5nKG5ld0Jvb2tpbmcpO1xyXG4gICAgYm9va2luZzEuc2F2ZSgpLnRoZW4oKCkgPT57XHJcbiAgICBzZW5kRW1haWwubWFpbFNlbmQodXNlckVtYWlsKTtcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtib29raW5nSWQ6IGJvb2tpbmdJZH0pO1xyXG4gICAgYm9va2luZ0lkKys7XHJcbiAgICBjb25zb2xlLmxvZygnYm9va2luZyBzdWNjZXNzJyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vL0RFTEVURSBCT09LSU5HXHJcblxyXG4vKipcclxuICogQHN3YWdnZXJcclxuICogL2Jvb2tpbmcvY2FuY2VsL3tib29raW5nSWR9OlxyXG4gKiAgZGVsZXRlOlxyXG4gKiAgICBkZXNjcmlwdGlvbjogVXNlIHRvIGNhbmNlbFxyXG4gKiAgICByZXNwb25zZXM6XHJcbiAqICAgICAgJzIwMCc6XHJcbiAqICAgICAgICBkZXNjcmlwdGlvbjogQm9va2luZyBzdWNjZXNzZnVsbHkgY2FuY2VsbGVkXHJcbiAqICAgICAgJzQwMCc6XHJcbiAqICAgICAgICBkZXNjcmlwdGlvbjogU2VydmVyIGVycm9yLlxyXG4gKiAgcGFyYW1ldGVyczpcclxuICogICAgICAgIC0gaW46IHBhdGhcclxuICogICAgICAgICAgbmFtZTogYm9va2luZ0lkXHJcbiAqICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAqICAgICAgICAgIHNjaGVtYTpcclxuICogICAgICAgICAgICB0eXBlOiBudW1iZXJcclxuICogICAgICAgICAgZGVzY3JpcHRpb246IGJvb2tpbmdJZFxyXG4gKi9cclxuXHJcbmFwcC5kZWxldGUoXCIvYm9va2luZy9jYW5jZWwvOmJvb2tpbmdJZFwiLCAocmVxLCByZXMpPT57XHJcbiAgYm9va2luZy5kZWxldGVPbmUoe2Jvb2tpbmdJZDogcmVxLnBhcmFtcy5ib29raW5nSWR9KS50aGVuKChyZXNwb25zZSk9PntcclxuICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJlc3BvbnNlKTtcclxuICAgIGNvbnNvbGUubG9nKFwiYm9va2luZyBjYW5jZWxsZWRcIik7XHJcbiAgfSlcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5hcHAubGlzdGVuKDMzMDAsIChlcnIpID0+IHtcclxuICBpZihlcnIpe1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9XHJcbiAgY29uc29sZS5sb2coXCJMaXN0ZW5pbmcgdG8gcG9ydCAzMzAwXCIpO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gIGFwcDsiXX0=